<!doctype html><html lang=pt-br><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=Content-Language content="pt-br"><meta name=color-scheme content="light dark"><meta http-equiv=Content-Security-Policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self'; form-action 'self'; frame-src 'self'; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; prefetch-src 'self'; connect-src 'self';"><meta name=author content="Eduardo Weiland"><meta name=description content="O Arduino √©, basicamente, uma plataforma de aprendizado. A IDE oficial √© bem simples e n√£o oferece muitos recursos para usu√°rios mais avan√ßados. Para quem quer manter as depend√™ncias/bibliotecas organizadas, a IDE do Arduino n√£o ajuda em nada. Felizmente existe o PlatformIO. E, nesse post, eu vou mostrar como eu atualizei o Placarduino para utilizar a estrutura de um projeto dessa plataforma.
Com as ideias de melhorias para o Placarduino, em breve ele deve se transformar em um pequeno monstro üôÇ."><meta name=keywords content="blog,home,portfolio,personal,developer,maker"><meta name=twitter:card content="summary"><meta name=twitter:title content="Substituindo a IDE do Arduino pelo PlatformIO"><meta name=twitter:description content="O Arduino √©, basicamente, uma plataforma de aprendizado. A IDE oficial √© bem simples e n√£o oferece muitos recursos para usu√°rios mais avan√ßados. Para quem quer manter as depend√™ncias/bibliotecas organizadas, a IDE do Arduino n√£o ajuda em nada. Felizmente existe o PlatformIO. E, nesse post, eu vou mostrar como eu atualizei o Placarduino para utilizar a estrutura de um projeto dessa plataforma.
Com as ideias de melhorias para o Placarduino, em breve ele deve se transformar em um pequeno monstro üôÇ."><meta property="og:title" content="Substituindo a IDE do Arduino pelo PlatformIO"><meta property="og:description" content="O Arduino √©, basicamente, uma plataforma de aprendizado. A IDE oficial √© bem simples e n√£o oferece muitos recursos para usu√°rios mais avan√ßados. Para quem quer manter as depend√™ncias/bibliotecas organizadas, a IDE do Arduino n√£o ajuda em nada. Felizmente existe o PlatformIO. E, nesse post, eu vou mostrar como eu atualizei o Placarduino para utilizar a estrutura de um projeto dessa plataforma.
Com as ideias de melhorias para o Placarduino, em breve ele deve se transformar em um pequeno monstro üôÇ."><meta property="og:type" content="article"><meta property="og:url" content="https://ew.dev.br/posts/2017/10/substituindo-a-ide-do-arduino-pelo-platformio/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-10-31T23:35:33-02:00"><meta property="article:modified_time" content="2017-10-31T23:35:33-02:00"><meta property="og:see_also" content="https://ew.dev.br/posts/2018/02/reset-automatico-do-placarduino-apos-o-fim-do-jogo/"><meta property="og:see_also" content="https://ew.dev.br/posts/2018/02/fim-de-jogo-para-o-placarduino/"><meta property="og:see_also" content="https://ew.dev.br/posts/2018/01/cartoes-de-acesso-para-o-placarduino/"><meta property="og:see_also" content="https://ew.dev.br/posts/2018/01/refatoracao-do-placarduino/"><meta property="og:see_also" content="https://ew.dev.br/posts/2018/01/atualizacao-do-placarduino-reducao-de-pontos/"><meta property="og:see_also" content="https://ew.dev.br/posts/2017/11/display-maior-numeros-maiores/"><title>Substituindo a IDE do Arduino pelo PlatformIO ¬∑ Eduardo Weiland
</title><link rel=canonical href=https://ew.dev.br/posts/2017/10/substituindo-a-ide-do-arduino-pelo-platformio/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.cbf6f68b2a836dd1d34f005153262dd21d148461cf33684940f1bb4c048821b1.css integrity="sha256-y/b2iyqDbdHTTwBRUyYt0h0UhGHPM2hJQPG7TASIIbE=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.dde8a61eb31a32353b4baf3d9113f03c4ea2a8ca9bb736f59ca2d2b2cb664f0b.css integrity="sha256-3eimHrMaMjU7S689kRPwPE6iqMqbtzb1nKLSsstmTws=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.css><link rel=icon type=image/png href=/images/favicon32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.124.1"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Eduardo Weiland
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://ew.dev.br/posts/2017/10/substituindo-a-ide-do-arduino-pelo-platformio/>Substituindo a IDE do Arduino pelo PlatformIO</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2017-10-31T23:35:33-02:00>Oct 31, 2017
</time></span><span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
4 minutos de leitura</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<a href=/tags/arduino/>arduino</a>
<span class=separator>‚Ä¢</span>
<a href=/tags/eletronica/>eletronica</a>
<span class=separator>‚Ä¢</span>
<a href=/tags/placarduino/>placarduino</a></div></div></header><div><img src=/images/platformio-logo.png alt="Featured image"><p>O Arduino √©, basicamente, uma plataforma de aprendizado. A IDE oficial √© bem
simples e n√£o oferece muitos recursos para usu√°rios mais avan√ßados. Para quem
quer manter as depend√™ncias/bibliotecas organizadas, a IDE do Arduino n√£o ajuda
em nada. Felizmente existe o <a href=http://platformio.org/>PlatformIO</a>. E, nesse post, eu vou mostrar como
eu atualizei o <a href=/posts/2017/10/placarduino-placar-eletronico-com-arduino/>Placarduino</a> para utilizar a estrutura de um projeto dessa
plataforma.</p><hr><p>Com as ideias de melhorias para o Placarduino, em breve ele deve se transformar
em um pequeno monstro üôÇ. V√°rias bibliotecas externas utilizadas, em vers√µes
espec√≠ficas, algumas que poderiam ser instaladas pelo gerenciador de bibliotecas
do Arduino, outras que precisariam ser baixadas, descompactadas e copiadas para
um diret√≥rio espec√≠fico, al√©m das bibliotecas internas para separar as fun√ß√µes
do programa e v√°rios arquivos no projeto principal. √â, a organiza√ß√£o do c√≥digo
ser√° fundamental para continuar desenvolvendo esse projeto.</p><p>O PlatformIO se descreve como um ecossistema de c√≥digo-aberto para desenvolvimento
de Internet das Coisas. O <a href=http://docs.platformio.org/en/latest/core.html>core</a> dele consiste em uma arquitetura
de compila√ß√£o multiplataforma, um gerenciador de bibliotecas com gerenciamento
de depend√™ncias dos projetos (similar ao NPM e ao Composer), um localizador de
depend√™ncias utilizadas (que verifica os <code>#include</code>&rsquo;s para saber quais bibliotecas
devem ser compiladas) e outras ferramentas.</p><p>Al√©m do core, o PlatformIO tamb√©m pode ser <a href=http://docs.platformio.org/en/latest/ide.html>integrado a v√°rias IDEs</a>.
As IDEs mais recomendadas s√£o o Atom e o VSCode. √â essa integra√ß√£o do PlatformIO
com a IDE que eu vou utilizar e mostrar neste post. Para continuar, eu escolhi o
VSCode como IDE por ser mais r√°pido e responsivo que o Atom (<em>pelo menos uma vez
na vida a Microsoft fez um software decente&mldr;</em>).</p><p>Abrindo a IDE com o plugin instalado, existe uma op√ß√£o para importar um sketch
existente do Arduino. Essa op√ß√£o, basicamente, cria um novo projeto baseado no
template padr√£o e copia todos os arquivos do sketch do Arduino para uma pasta
<code>src</code> dentro do novo projeto. Mas n√£o funcionou muito bem com o Placarduino.
Como o sketch atual √© um reposit√≥rio Git, ao fazer essa importa√ß√£o, o reposit√≥rio
ficou dentro do src e n√£o no projeto inteiro. Ent√£o eu decidi fazer a migra√ß√£o
manualmente.</p><p>Um projeto do PlatformIO √© identificado por um arquivo <code>platformio.ini</code> na raiz
do diret√≥rio. Nesse arquivo s√£o configurados a placa e o framework utilizados (o
PlatformIO suporta v√°rios, mas eu s√≥ estou desenvolvendo o Placarduino com a
placa Arduino UNO e o framework Arduino). Esse mesmo arquivo tamb√©m √© utilizado
para listar as depend√™ncias de bibliotecas, que ser√£o instaladas automaticamente.
Eu me baseei no arquivo gerado para um novo projeto e na <a href=http://docs.platformio.org/en/latest/projectconf.html>documenta√ß√£o do formato
desse arquivo</a>, e acabei com essa configura√ß√£o:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#6272a4>; PlatformIO Project Configuration File</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>;</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>;   Build options: build flags, source filter</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>;   Upload options: custom upload port, speed and extra flags</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>;   Library options: dependencies, extra library storages</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>;   Advanced options: extra scripting</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>;</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>; Please visit documentation for the other options and examples</span>
</span></span><span style=display:flex><span><span style=color:#6272a4>; http://docs.platformio.org/page/projectconf.html</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[env:uno]</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>platform</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>atmelavr</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>board</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>uno</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>framework</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>arduino</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>lib_deps</span> <span style=color:#ff79c6>=</span><span style=color:#f1fa8c>
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    Wire@1.0
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    LiquidCrystal@1.3.4
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>    ToneLibrary@1.7.1</span>
</span></span></code></pre></div><p>Nesse arquivo, as op√ß√µes <code>platform</code>, <code>board</code> e <code>framework</code> em conjunto configuram
a placa que est√° sendo utilizada e como deve ser feita a compila√ß√£o e &ldquo;deploy&rdquo;
para ela. Voc√™ pode ver <a href=http://platformio.org/boards>nessa p√°gina</a> todas as op√ß√µes e
combina√ß√µes poss√≠veis.</p><p>A op√ß√£o <code>lib_deps</code> √© uma lista das depend√™ncias do projeto. Para pesquisar as
bibliotecas dispon√≠veis, voc√™ pode utilizar o PIO Home (√≠cone de casa na barra
interior do VSCode), pesquisar a biblioteca, copiar o nome e vers√£o da aba
&ldquo;Install&rdquo; e colocar nesse arquivo. Ap√≥s salvar esse arquivo, o PlatformIO j√°
vai baixar as depend√™ncias automaticamente e salvar na pasta <code>.piolibdeps</code>.</p><p>Depois de criar o <code>platformio.ini</code>, eu movi alguns arquivos para melhorar a
organiza√ß√£o:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$ mkdir docs src
</span></span><span style=display:flex><span>$ git mv Placarduino.fzz docs/
</span></span><span style=display:flex><span>$ git mv Placarduino.ino src/
</span></span></code></pre></div><p>O resto dos arquivos necess√°rios, o pr√≥prio PlatformIO gera automaticamente
quando o projeto √© aberto na IDE.</p><p>Agora programar para Arduino j√° est√° mais parecido com programa√ß√£o de softwares
no s√©culo 21 üòâ</p></div><footer><section class=see-also><h3 id=see-also-in-placarduino>See also in placarduino
<a class=heading-link href=#see-also-in-placarduino><i class="fa fa-link" aria-hidden=true></i></a></h3><nav><ul><li><a href=/posts/2018/02/reset-automatico-do-placarduino-apos-o-fim-do-jogo/>Reset autom√°tico do Placarduino ap√≥s o fim do jogo</a></li><li><a href=/posts/2018/02/fim-de-jogo-para-o-placarduino/>Fim de jogo para o Placarduino</a></li><li><a href=/posts/2018/01/cartoes-de-acesso-para-o-placarduino/>Cart√µes de acesso para o Placarduino</a></li><li><a href=/posts/2018/01/refatoracao-do-placarduino/>Refatora√ß√£o do Placarduino</a></li><li><a href=/posts/2018/01/atualizacao-do-placarduino-reducao-de-pontos/>Atualiza√ß√£o do Placarduino: redu√ß√£o de pontos</a></li><li><a href=/posts/2017/11/display-maior-numeros-maiores/>Display maior, n√∫meros maiores</a></li></ul></nav></section></footer></article></section></div><footer class=footer><section class=container>&copy;
2011 -
2024
Eduardo Weiland
&#183;
<a rel="license noopener" href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a>
&#183;
<a rel=noopener href=https://github.com/eduardoweiland/ew.dev.br>Free Software</a></section></footer></main><script src=/js/coder.min.978ac2219b08e24e68c3f3eada8d99add50d9d997ce3861354b602cc94f75f30.js integrity="sha256-l4rCIZsI4k5ow/Pq2o2ZrdUNnZl844YTVLYCzJT3XzA="></script></body></html>